Министерство науки и высшего образования Российской Федерации федеральное государственное автономное образовательное учреждение высшего образования

«Национальный исследовательский университет ИТМО»

---
__ФПИиКТ, Системное и Прикладное Программное Обеспечение__

__Лабораторная работа №1__

по Функциональному программированию

Выполнил: Ханнанов Л. И.

Группа: P34112

Преподаватель: Пенской Александр Владимирович

###### Санкт-Петербург
###### 2022 г.

---

## Описание проблемы
### [Even Fibonacci numbers](https://projecteuler.net/problem=2)

#### Problem 2

Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:

$$
  1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
$$

By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.

### [Distinct powers](https://projecteuler.net/problem=29)

#### Problem 29

Consider all integer combinations of $a^b$ for $2 \leq a \leq 5$ and $2 \leq b \leq 5$:

$$
  \begin{align*}
    2^2=4, && 2^3=8,  && 2^4=16, && 2^5=32\\
    3^2=9, && 3^3=27, && 3^4=81, && 3^5=243\\
    4^2=16,&& 4^3=64, && 4^4=256,&& 4^5=1024\\
    5^2=25,&& 5^3=125,&& 5^4=625,&& 5^5=3125
  \end{align*}
$$

If they are then placed in numerical order, with any repeats removed, we get the following sequence of 15 distinct terms:

$$
  4, 8, 9, 16, 25, 27, 32, 64, 81, 125, 243, 256, 625, 1024, 3125
$$

How many distinct terms are in the sequence generated by $a^b$ for $2 \leq a \leq 100$ and $2 \leq b \leq 100$?

## Ключевые элементы реализации с минимальными комментариями

### Problem 2

1. __монолитная реализация__
    + __хвостовая рекурсия__
    ```
    (define (sum-of-even-fibonacci-numbers-less-than limit)
      (if (negative? limit)
          (raise-argument-error 'negative-limit "non-negative value" limit)
          (let inner-summer ([sum 0] [previous 1] [current 1])
            (if (= limit 0)
              0
              (if (not (negative? (- current limit)))
                sum
                (if (even? current)
                  (inner-summer (+ sum current) current (+ previous current))
                  (inner-summer sum current (+ previous current))))))))

    (sum-of-even-fibonacci-numbers-less-than 4000000)
    ```
    + __рекурсия__
    ```
    (define (sum-of-even-fibonacci-numbers-less-than limit)
      (cond
        [(> limit 1)
        (let ([closest-number (let closest-fibonacci-number ([previous 1] [current 1])
                                (if (>= current limit)
                                    previous
                                    (closest-fibonacci-number current (+ previous current))))])
          (if (even? closest-number)
              (+ closest-number (sum-of-even-fibonacci-numbers-less-than closest-number))
              (sum-of-even-fibonacci-numbers-less-than closest-number)))]
        [(= limit 1) 0]
        [(zero? limit) 0]
        [else (raise-argument-error 'negative-limit "non-negative value" limit)]))

    (sum-of-even-fibonacci-numbers-less-than 4000000)
    ```
2. __модульная реализация__
```
(define (fibonacci-numbers-less-than limit)
  (let loop ([previous 1] [current 1])
    (if (>= current limit) (list) (list* current (loop current (+ previous current))))))

(foldl + 0 (filter even? (fibonacci-numbers-less-than 4000000)))
```
3. __генерация последовательности при помощи отображения (map)__
```
(define (fibonacci n)
  (if (<= n 2) n (+ (fibonacci (sub1 n)) (fibonacci (- n 2)))))

(define (last-fibonacci-number-less-than limit previous current number)
  (if (>= current limit)
      (sub1 number)
      (last-fibonacci-number-less-than limit current (+ previous current) (add1 number))))

(foldl +
       0
       (map (lambda (number) (if (even? number) number 0))
            (map fibonacci
                 (sequence->list
                  (in-inclusive-range 1 (last-fibonacci-number-less-than 4000000 1 1 1))))))
```
4. __работа со спец. синтаксисом для циклов__
```
(define (sum-of-even-fibonacci-numbers-less-than limit)
  (do ([sum 0] [previous 1 current] [current 1 (+ previous current)])
      ((>= current limit) sum)
      (if (even? current) (set! sum (+ current sum)) (void))))

(sum-of-even-fibonacci-numbers-less-than 4000000)
```
5. __работа с бесконечными списками для языков поддерживающих ленивые коллекции или итераторы как часть языка__
```
(define (even-fibonacci-numbers-less-than limit)
  (let loop ([previous 1] [current 1])
    (if (>= current limit)
        empty-stream
        (if (even? current)
            (stream* current (loop current (+ previous current)))
            (loop current (+ previous current))))))

(stream-fold + 0 (even-fibonacci-numbers-less-than 4000000))
```
6. __реализация на любом удобном языке программировании__
```
def fibonacci_less_than(limit: int) -> Iterable[int]:
    prev = 0
    curr = 1
    while curr < limit:
        temp = curr
        curr = prev + curr
        prev = temp
        if curr >= limit:
            break
        yield curr


def main(limit: int) -> None:
    print(sum(filter(lambda x: x % 2 == 0, fibonacci_less_than(limit))))
```

### Problem 29

1. __монолитная реализация__
    + __хвостовая рекурсия__
    + __рекурсия__
2. __модульная реализация__
3. __генерация последовательности при помощи отображения (map)__
4. __работа со спец. синтаксисом для циклов__
5. __работа с бесконечными списками для языков поддерживающих ленивые коллекции или итераторы как часть языка__
6. __реализация на любом удобном языке программировании__

## Выводы

В ходе выполнения данной лабораторной работы я освоил базовые приемы и абстракции языка __Racket__. Рекурсия, функции свертки, отображения и другие потоковые функции, списки, последовательности и стримы. Формы передачи потока управления в виде различных циклов, условных форм `if` и `cond`. Формы для организации локальных привязок с помощью `let`.
